<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>pet-app2</title>

  <!-- MediaPipeï¼ˆç¬‘é¡”æ¤œçŸ¥ç”¨ï¼‰ -->
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/face_mesh.js"></script>

  <style>
    body {
      font-family: sans-serif;
      background: #fafafa;
      padding-bottom: 40px;
    }

    h2 {
      text-align: center;
      margin-top: 20px;
    }

    /* ãƒšãƒƒãƒˆè¡¨ç¤ºé ˜åŸŸ */
    #mediaArea {
      position: relative;
      width: 300px;
      margin: 20px auto;
    }

    #mediaWrapper {
      width: 100%;
      border-radius: 12px;
      overflow: hidden;
    }

    #mediaElement {
      width: 100%;
      border-radius: 12px;
    }

    /* ãƒ¢ãƒ¼ãƒ‰é¸æŠUI */
    .mode-section {
      margin: 20px auto;
      text-align: center;
    }

    .generate-area {
      text-align: center;
      margin-top: 20px;
    }

    #result-area {
      text-align: center;
      margin-top: 20px;
      min-height: 80px;
    }

    /* -------------------------------------------------------
       ç”Ÿæˆä¸­ã® UI åˆ¶å¾¡ï¼ˆå›è»¢ãƒ»ç„¡åŠ¹åŒ–ï¼‰
    ------------------------------------------------------- */
    .active-rotate {
      animation: spin 1s linear infinite;
      opacity: 1;
    }

    .disabled {
      opacity: 0.4;
      pointer-events: none;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º */
    .spinner {
      width: 32px;
      height: 32px;
      border: 4px solid #ccc;
      border-top-color: #4CAF50;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto;
    }
  </style>
</head>

<body>

  <h2>pet-app2</h2>

  <!-- ãƒšãƒƒãƒˆè¡¨ç¤ºé ˜åŸŸï¼ˆn1 ãŒãƒ›ãƒ¼ãƒ ç”»é¢ï¼‰ -->
  <div id="mediaArea">
    <div id="mediaWrapper">
      <img id="mediaElement" src="">
    </div>
  </div>

  <!-- å‹•ç”»ï¼ˆp2ï¼‰ -->
  <div class="mode-section">
    <h3>å‹•ç”»ï¼ˆãŠã™ã™ã‚ï¼‰</h3>
    <button id="videoModeBtn" data-mode="p2">å–œã³å‹•ç”»ã‚’ç”Ÿæˆã™ã‚‹</button>
  </div>

  <!-- ç”»åƒï¼ˆn2ã€œp9 ã®ä¸­ã‹ã‚‰1ã¤ï¼‰ -->
  <div class="mode-section">
    <h3>ç”»åƒï¼ˆã©ã‚Œã‹1ã¤ï¼‰</h3>
    <select id="imageModeSelect">
      <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
      <option value="n2">ãŠåº§ã‚Š</option>
      <option value="n3">å¯ã‚“ã­</option>
      <option value="p1">éŠã¶</option>
      <option value="p3">ä¼ã›</option>
      <option value="p4">ãŠæ‰‹</option>
      <option value="p5">ã”ã¯ã‚“</option>
      <option value="p6">ãŠæ°´</option>
      <option value="p7">ãƒˆã‚¤ãƒ¬</option>
      <option value="p8">æŒã£ã¦ã“ã„</option>
      <option value="p9">ãƒã‚¦ã‚¹</option>
    </select>
  </div>

  <!-- ç”Ÿæˆãƒœã‚¿ãƒ³ -->
  <div class="generate-area">
    <button id="generateBtn">ç”Ÿæˆã™ã‚‹</button>
  </div>

  <!-- çµæœè¡¨ç¤º -->
  <div id="result-area">
    <p>ãƒ¢ãƒ¼ãƒ‰ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚</p>
  </div>

  <!-- ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ç”¨ï¼ˆéŸ³å£°ãƒ»ç¬‘é¡”ãƒ»æ’«ã§ã‚‹ï¼‰ -->
  <div id="interaction-controls" style="text-align:center; margin-top:30px;">
    <button id="mic-btn">ğŸ¤ å£°ã§åå¿œ</button>
    <button id="camera-btn">ğŸ“· ç¬‘é¡”ã§åå¿œ</button>
  </div>

  <!-- ã‚«ãƒ¡ãƒ©å…¥åŠ›ï¼ˆéè¡¨ç¤ºï¼‰ -->
  <video id="input-video" style="display:none;"></video>

  <!-- ç¨®æ—åˆ¥ã®éŸ³å£° -->
  <audio id="pet-sound"></audio>

  <!-- script.jsï¼ˆç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯ï¼‹ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³çµ±åˆç‰ˆï¼‰ -->
  <script type="module" src="script.js"></script>

  <script>
    // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã« n1 ã‚’è¡¨ç¤º
    window.addEventListener("DOMContentLoaded", () => {
      const n1 = localStorage.getItem("n1Url");
      if (n1) {
        document.getElementById("mediaElement").src = n1;
      }
    });
  </script>

</body>
</html>